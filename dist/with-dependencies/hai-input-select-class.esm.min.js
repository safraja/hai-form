/**
 * Hai Form (https://github.com/safraja/hai-form) - Javascript library for custom inputs and selects with additional functions.
 * Copyright (c) 2021 Jakub Šafránek All Rights Reserved
 * @license MIT Licensed
 */
import{_ as e,a as t,c as n,b as s,d as i,e as r,HaiInput as a,h as o,i as c,j as l,f as h,g as u}from"./hai-input-class.esm.min.js";import"./en.esm.min.js";
/**
 * Fuse.js v6.6.2 - Lightweight fuzzy-search (http://fusejs.io)
 *
 * Copyright (c) 2022 Kiro Risk (http://kiro.me)
 * All Rights Reserved. Apache Software License 2.0
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 */function d(e){return Array.isArray?Array.isArray(e):"[object Array]"===b(e)}function p(e){return"string"==typeof e}function m(e){return"number"==typeof e}function f(e){return!0===e||!1===e||function(e){return v(e)&&null!==e}(e)&&"[object Boolean]"==b(e)}function v(e){return"object"==typeof e}function g(e){return null!=e}function y(e){return!e.trim().length}function b(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const x=Object.prototype.hasOwnProperty;class k{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach((e=>{let n=M(e);t+=n.weight,this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight})),this._keys.forEach((e=>{e.weight/=t}))}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function M(e){let t=null,n=null,s=null,i=1,r=null;if(p(e)||d(e))s=e,t=L(e),n=w(e);else{if(!x.call(e,"name"))throw new Error((e=>`Missing ${e} property in key`)("name"));const a=e.name;if(s=a,x.call(e,"weight")&&(i=e.weight,i<=0))throw new Error((e=>`Property 'weight' in key '${e}' must be a positive integer`)(a));t=L(a),n=w(a),r=e.getFn}return{path:t,id:n,weight:i,src:s,getFn:r}}function L(e){return d(e)?e:e.split(".")}function w(e){return d(e)?e.join("."):e}var O={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...{useExtendedSearch:!1,getFn:function(e,t){let n=[],s=!1;const i=(e,t,r)=>{if(g(e))if(t[r]){const a=e[t[r]];if(!g(a))return;if(r===t.length-1&&(p(a)||m(a)||f(a)))n.push(function(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(a));else if(d(a)){s=!0;for(let e=0,n=a.length;e<n;e+=1)i(a[e],t,r+1)}else t.length&&i(a,t,r+1)}else n.push(e)};return i(e,p(t)?t.split("."):t,0),s?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1}};const S=/[^ ]+/g;class E{constructor({getFn:e=O.getFn,fieldNormWeight:t=O.fieldNormWeight}={}){this.norm=function(e=1,t=3){const n=new Map,s=Math.pow(10,t);return{get(t){const i=t.match(S).length;if(n.has(i))return n.get(i);const r=1/Math.pow(i,.5*e),a=parseFloat(Math.round(r*s)/s);return n.set(i,a),a},clear(){n.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach(((e,t)=>{this._keysMap[e.id]=t}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,p(this.docs[0])?this.docs.forEach(((e,t)=>{this._addString(e,t)})):this.docs.forEach(((e,t)=>{this._addObject(e,t)})),this.norm.clear())}add(e){const t=this.size();p(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!g(e)||y(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach(((t,s)=>{let i=t.getFn?t.getFn(e):this.getFn(e,t.path);if(g(i))if(d(i)){let e=[];const t=[{nestedArrIndex:-1,value:i}];for(;t.length;){const{nestedArrIndex:n,value:s}=t.pop();if(g(s))if(p(s)&&!y(s)){let t={v:s,i:n,n:this.norm.get(s)};e.push(t)}else d(s)&&s.forEach(((e,n)=>{t.push({nestedArrIndex:n,value:e})}))}n.$[s]=e}else if(p(i)&&!y(i)){let e={v:i,n:this.norm.get(i)};n.$[s]=e}})),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function C(e,t,{getFn:n=O.getFn,fieldNormWeight:s=O.fieldNormWeight}={}){const i=new E({getFn:n,fieldNormWeight:s});return i.setKeys(e.map(M)),i.setSources(t),i.create(),i}function I(e,{errors:t=0,currentLocation:n=0,expectedLocation:s=0,distance:i=O.distance,ignoreLocation:r=O.ignoreLocation}={}){const a=t/e.length;if(r)return a;const o=Math.abs(s-n);return i?a+o/i:o?1:a}function A(e,t,n,{location:s=O.location,distance:i=O.distance,threshold:r=O.threshold,findAllMatches:a=O.findAllMatches,minMatchCharLength:o=O.minMatchCharLength,includeMatches:c=O.includeMatches,ignoreLocation:l=O.ignoreLocation}={}){if(t.length>32)throw new Error(`Pattern length exceeds max of ${32}.`);const h=t.length,u=e.length,d=Math.max(0,Math.min(s,u));let p=r,m=d;const f=o>1||c,v=f?Array(u):[];let g;for(;(g=e.indexOf(t,m))>-1;){let e=I(t,{currentLocation:g,expectedLocation:d,distance:i,ignoreLocation:l});if(p=Math.min(e,p),m=g+h,f){let e=0;for(;e<h;)v[g+e]=1,e+=1}}m=-1;let y=[],b=1,x=h+u;const k=1<<h-1;for(let s=0;s<h;s+=1){let r=0,o=x;for(;r<o;){I(t,{errors:s,currentLocation:d+o,expectedLocation:d,distance:i,ignoreLocation:l})<=p?r=o:x=o,o=Math.floor((x-r)/2+r)}x=o;let c=Math.max(1,d-o+1),g=a?u:Math.min(d+o,u)+h,M=Array(g+2);M[g+1]=(1<<s)-1;for(let r=g;r>=c;r-=1){let a=r-1,o=n[e.charAt(a)];if(f&&(v[a]=+!!o),M[r]=(M[r+1]<<1|1)&o,s&&(M[r]|=(y[r+1]|y[r])<<1|1|y[r+1]),M[r]&k&&(b=I(t,{errors:s,currentLocation:a,expectedLocation:d,distance:i,ignoreLocation:l}),b<=p)){if(p=b,m=a,m<=d)break;c=Math.max(1,2*d-m)}}if(I(t,{errors:s+1,currentLocation:d,expectedLocation:d,distance:i,ignoreLocation:l})>p)break;y=M}const M={isMatch:m>=0,score:Math.max(.001,b)};if(f){const e=function(e=[],t=O.minMatchCharLength){let n=[],s=-1,i=-1,r=0;for(let a=e.length;r<a;r+=1){let a=e[r];a&&-1===s?s=r:a||-1===s||(i=r-1,i-s+1>=t&&n.push([s,i]),s=-1)}return e[r-1]&&r-s>=t&&n.push([s,r-1]),n}(v,o);e.length?c&&(M.indices=e):M.isMatch=!1}return M}function _(e){let t={};for(let n=0,s=e.length;n<s;n+=1){const i=e.charAt(n);t[i]=(t[i]||0)|1<<s-n-1}return t}class F{constructor(e,{location:t=O.location,threshold:n=O.threshold,distance:s=O.distance,includeMatches:i=O.includeMatches,findAllMatches:r=O.findAllMatches,minMatchCharLength:a=O.minMatchCharLength,isCaseSensitive:o=O.isCaseSensitive,ignoreLocation:c=O.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:s,includeMatches:i,findAllMatches:r,minMatchCharLength:a,isCaseSensitive:o,ignoreLocation:c},this.pattern=o?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const l=(e,t)=>{this.chunks.push({pattern:e,alphabet:_(e),startIndex:t})},h=this.pattern.length;if(h>32){let e=0;const t=h%32,n=h-t;for(;e<n;)l(this.pattern.substr(e,32),e),e+=32;if(t){const e=h-32;l(this.pattern.substr(e),e)}}else l(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:n}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let t={isMatch:!0,score:0};return n&&(t.indices=[[0,e.length-1]]),t}const{location:s,distance:i,threshold:r,findAllMatches:a,minMatchCharLength:o,ignoreLocation:c}=this.options;let l=[],h=0,u=!1;this.chunks.forEach((({pattern:t,alphabet:d,startIndex:p})=>{const{isMatch:m,score:f,indices:v}=A(e,t,d,{location:s+p,distance:i,threshold:r,findAllMatches:a,minMatchCharLength:o,includeMatches:n,ignoreLocation:c});m&&(u=!0),h+=f,m&&v&&(l=[...l,...v])}));let d={isMatch:u,score:u?h/this.chunks.length:1};return u&&n&&(d.indices=l),d}}class ${constructor(e){this.pattern=e}static isMultiMatch(e){return j(e,this.multiRegex)}static isSingleMatch(e){return j(e,this.singleRegex)}search(){}}function j(e,t){const n=e.match(t);return n?n[1]:null}class N extends ${constructor(e,{location:t=O.location,threshold:n=O.threshold,distance:s=O.distance,includeMatches:i=O.includeMatches,findAllMatches:r=O.findAllMatches,minMatchCharLength:a=O.minMatchCharLength,isCaseSensitive:o=O.isCaseSensitive,ignoreLocation:c=O.ignoreLocation}={}){super(e),this._bitapSearch=new F(e,{location:t,threshold:n,distance:s,includeMatches:i,findAllMatches:r,minMatchCharLength:a,isCaseSensitive:o,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class R extends ${constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,n=0;const s=[],i=this.pattern.length;for(;(t=e.indexOf(this.pattern,n))>-1;)n=t+i,s.push([t,n-1]);const r=!!s.length;return{isMatch:r,score:r?0:1,indices:s}}}const K=[class extends ${constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},R,class extends ${constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends ${constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends ${constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends ${constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class extends ${constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},N],T=K.length,H=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/;const P=new Set([N.type,R.type]);class W{constructor(e,{isCaseSensitive:t=O.isCaseSensitive,includeMatches:n=O.includeMatches,minMatchCharLength:s=O.minMatchCharLength,ignoreLocation:i=O.ignoreLocation,findAllMatches:r=O.findAllMatches,location:a=O.location,threshold:o=O.threshold,distance:c=O.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:n,minMatchCharLength:s,findAllMatches:r,ignoreLocation:i,location:a,threshold:o,distance:c},this.pattern=t?e:e.toLowerCase(),this.query=function(e,t={}){return e.split("|").map((e=>{let n=e.trim().split(H).filter((e=>e&&!!e.trim())),s=[];for(let e=0,i=n.length;e<i;e+=1){const i=n[e];let r=!1,a=-1;for(;!r&&++a<T;){const e=K[a];let n=e.isMultiMatch(i);n&&(s.push(new e(n,t)),r=!0)}if(!r)for(a=-1;++a<T;){const e=K[a];let n=e.isSingleMatch(i);if(n){s.push(new e(n,t));break}}}return s}))}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:s}=this.options;e=s?e:e.toLowerCase();let i=0,r=[],a=0;for(let s=0,o=t.length;s<o;s+=1){const o=t[s];r.length=0,i=0;for(let t=0,s=o.length;t<s;t+=1){const s=o[t],{isMatch:c,indices:l,score:h}=s.search(e);if(!c){a=0,i=0,r.length=0;break}if(i+=1,a+=h,n){const e=s.constructor.type;P.has(e)?r=[...r,...l]:r.push(l)}}if(i){let e={isMatch:!0,score:a/i};return n&&(e.indices=r),e}}return{isMatch:!1,score:1}}}const q=[];function G(e,t){for(let n=0,s=q.length;n<s;n+=1){let s=q[n];if(s.condition(e,t))return new s(e,t)}return new F(e,t)}const V="$and",z="$or",D="$path",U="$val",B=e=>!(!e[V]&&!e[z]),J=e=>({[V]:Object.keys(e).map((t=>({[t]:e[t]})))});function Q(e,t,{auto:n=!0}={}){const s=e=>{let i=Object.keys(e);const r=(e=>!!e[D])(e);if(!r&&i.length>1&&!B(e))return s(J(e));if((e=>!d(e)&&v(e)&&!B(e))(e)){const s=r?e[D]:i[0],a=r?e[U]:e[s];if(!p(a))throw new Error((e=>`Invalid value for key ${e}`)(s));const o={keyId:w(s),pattern:a};return n&&(o.searcher=G(a,t)),o}let a={children:[],operator:i[0]};return i.forEach((t=>{const n=e[t];d(n)&&n.forEach((e=>{a.children.push(s(e))}))})),a};return B(e)||(e=J(e)),s(e)}function X(e,t){const n=e.matches;t.matches=[],g(n)&&n.forEach((e=>{if(!g(e.indices)||!e.indices.length)return;const{indices:n,value:s}=e;let i={indices:n,value:s};e.key&&(i.key=e.key.src),e.idx>-1&&(i.refIndex=e.idx),t.matches.push(i)}))}function Y(e,t){t.score=e.score}class Z{constructor(e,t={},n){this.options={...O,...t},this.options.useExtendedSearch,this._keyStore=new k(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof E))throw new Error("Incorrect 'index' type");this._myIndex=t||C(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){g(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=(()=>!1)){const t=[];for(let n=0,s=this._docs.length;n<s;n+=1){const i=this._docs[n];e(i,n)&&(this.removeAt(n),n-=1,s-=1,t.push(i))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:n,includeScore:s,shouldSort:i,sortFn:r,ignoreFieldNorm:a}=this.options;let o=p(e)?p(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,{ignoreFieldNorm:t=O.ignoreFieldNorm}){e.forEach((e=>{let n=1;e.matches.forEach((({key:e,norm:s,score:i})=>{const r=e?e.weight:null;n*=Math.pow(0===i&&r?Number.EPSILON:i,(r||1)*(t?1:s))})),e.score=n}))}(o,{ignoreFieldNorm:a}),i&&o.sort(r),m(t)&&t>-1&&(o=o.slice(0,t)),function(e,t,{includeMatches:n=O.includeMatches,includeScore:s=O.includeScore}={}){const i=[];return n&&i.push(X),s&&i.push(Y),e.map((e=>{const{idx:n}=e,s={item:t[n],refIndex:n};return i.length&&i.forEach((t=>{t(e,s)})),s}))}(o,this._docs,{includeMatches:n,includeScore:s})}_searchStringList(e){const t=G(e,this.options),{records:n}=this._myIndex,s=[];return n.forEach((({v:e,i:n,n:i})=>{if(!g(e))return;const{isMatch:r,score:a,indices:o}=t.searchIn(e);r&&s.push({item:e,idx:n,matches:[{score:a,value:e,norm:i,indices:o}]})})),s}_searchLogical(e){const t=Q(e,this.options),n=(e,t,s)=>{if(!e.children){const{keyId:n,searcher:i}=e,r=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(t,n),searcher:i});return r&&r.length?[{idx:s,item:t,matches:r}]:[]}const i=[];for(let r=0,a=e.children.length;r<a;r+=1){const a=e.children[r],o=n(a,t,s);if(o.length)i.push(...o);else if(e.operator===V)return[]}return i},s=this._myIndex.records,i={},r=[];return s.forEach((({$:e,i:s})=>{if(g(e)){let a=n(t,e,s);a.length&&(i[s]||(i[s]={idx:s,item:e,matches:[]},r.push(i[s])),a.forEach((({matches:e})=>{i[s].matches.push(...e)})))}})),r}_searchObjectList(e){const t=G(e,this.options),{keys:n,records:s}=this._myIndex,i=[];return s.forEach((({$:e,i:s})=>{if(!g(e))return;let r=[];n.forEach(((n,s)=>{r.push(...this._findMatches({key:n,value:e[s],searcher:t}))})),r.length&&i.push({idx:s,item:e,matches:r})})),i}_findMatches({key:e,value:t,searcher:n}){if(!g(t))return[];let s=[];if(d(t))t.forEach((({v:t,i:i,n:r})=>{if(!g(t))return;const{isMatch:a,score:o,indices:c}=n.searchIn(t);a&&s.push({score:o,key:e,value:t,idx:i,norm:r,indices:c})}));else{const{v:i,n:r}=t,{isMatch:a,score:o,indices:c}=n.searchIn(i);a&&s.push({score:o,key:e,value:i,norm:r,indices:c})}return s}}Z.version="6.6.2",Z.createIndex=C,Z.parseIndex=function(e,{getFn:t=O.getFn,fieldNormWeight:n=O.fieldNormWeight}={}){const{keys:s,records:i}=e,r=new E({getFn:t,fieldNormWeight:n});return r.setKeys(s),r.setIndexRecords(i),r},Z.config=O,Z.parseQuery=Q,function(...e){q.push(...e)}(W);var ee=function(d){e(g,a);var p,m,f,v=t(g);function g(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n(this,g),(e=v.call(this,t,s)).options=new Map,e.optionsSource=null,e.optGroups=new Set,e.selectedOptions=new Map,e.valuesSet=new Set,e.multiple=!1,e.showTagRemoveButton=!0,e.enableSearch=!0,e.placeholder=null,e.tabIndex=0,e.optionsItemsContainer=null,e.tagsContainer=null,e.searchInput=null,e.inputText=null,e.type="select",e}return s(g,[{key:"transformElementToHaiInput",value:(f=o(c().mark((function e(){var t,n,s,r,o,l,h,u,d,p,m,f,v,g,y,b,x,k,M,L,w,O,S,E=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.element.name,this.value=this.element.value,this.rawValue=this.value,n=document.createElement("select"),void 0!==t&&(this.element.removeAttribute("name"),n.name=t),n.hidden=!0,n.classList.add("hidden"),this.processElementContentAndAttributes(this.element),e.next=10,this.processAttributes();case 10:return e.next=12,this.processParameters();case 12:if(this.disabled&&(n.disabled=!0),(s=document.createElement("div")).classList.add("hai-input-element"),s.classList.add("select"),(r=document.createElement("div")).classList.add("label-text"),(o=document.createElement("div")).classList.add("alert"),(l=document.createElement("div")).classList.add("select-wrapper"),l.tabIndex=-1,!0===this.multiple?l.classList.add("multiple"):l.classList.add("single"),(h=document.createElement("div")).classList.add("input-field"),h.tabIndex=this.tabIndex,l.appendChild(h),!0===this.multiple){(u=document.createElement("ul")).classList.add("tags"),null!==this.placeholder&&u.setAttribute("data-placeholder",this.placeholder),this.tagsContainer=u,h.appendChild(u),d=i(this.selectedOptions.values());try{for(d.s();!(p=d.n()).done;)m=p.value,this.addTag(m,u)}catch(e){d.e(e)}finally{d.f()}}else(f=document.createElement("span")).classList.add("input-text"),h.appendChild(f),this.inputText=f,this.selectedOptions.size>0&&(v=Array.from(this.selectedOptions.values())[0],f.textContent=v.label,f.setAttribute("data-value",v.value));(g=document.createElement("div")).classList.add("dropdown"),(y=document.createElement("ul")).classList.add("options-container"),this.optionsItemsContainer=y,g.appendChild(y),(b=document.createElement("div")).classList.add("info"),g.appendChild(b),(x=document.createElement("div")).classList.add("control-buttons"),g.appendChild(x),(k=document.createElement("div")).classList.add("button"),k.textContent="Confirm",x.appendChild(k),k.addEventListener("click",(function(e){E.hideDropdown(e)})),l.appendChild(g),s.append(r,l,o),this.element.after(s),this.element.remove(),this.element=l,this.element.haiInput=this,this.renderOptionsItems(this.options,y),M=Math.floor(99999999*Math.random()+1),n.id="select-".concat(M),!0===this.multiple&&(n.multiple=!0),this.element.parentElement.appendChild(n),this.twin=n,this.labelElement=r,this.warningElement=o,void 0!==this.label&&(this.labelElement.textContent=this.label),this.setTwinOptions(),!0===this.enableSearch&&((L=document.createElement("div")).classList.add("search-container"),(w=document.createElement("input")).placeholder=a.dictionary["search-placeholder"],this.searchInput=w,L.appendChild(w),g.prepend(L),h.addEventListener("click",(function(e){w.focus()})),w.addEventListener("input",(function(e){E.useFuseSearch(e)}))),this.element.addEventListener("focusin",(function(e){E.showDropdown(e),e.target===h&&E.element.focus()})),O=function(e){E.hideDropdown(e)},this.element.addEventListener("blur",O),null!==this.searchInput&&this.searchInput.addEventListener("blur",O),this.element.removeEventListener("blur",this.hideDropdown),null!==this.searchInput&&this.searchInput.removeEventListener("blur",this.hideDropdown),null!==(S=n.form)&&S.addEventListener("submit",(function(e){return!1!==E.checkValidity().success||(e.preventDefault(),!1)}));case 73:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"useFuseSearch",value:function(e){var t=e.target.value;if(""!==t){var n,s=new Z(Array.from(this.options.values()),{keys:["label","value","group"],threshold:.45}).search(t),r=new Map,a=i(s);try{for(a.s();!(n=a.n()).done;){var o=n.value;r.set(this.generateOptionKey(o.item),o.item)}}catch(e){a.e(e)}finally{a.f()}this.renderOptionsItems(r)}else this.renderOptionsItems()}},{key:"processElementContentAndAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===e&&(e=this.element),"SELECT"===e.nodeName){var t=e.querySelectorAll("optgroup"),n=e.options;if(0===t.length){var s,r=i(n);try{for(r.s();!(s=r.n()).done;){var a=s.value;this.options.set(this.generateOptionKey(a),{value:a.value,label:a.label})}}catch(e){r.e(e)}finally{r.f()}}else{var o,c=i(t);try{for(c.s();!(o=c.n()).done;){var l=o.value;this.optGroups.add(l.label)}}catch(e){c.e(e)}finally{c.f()}var h,u=i(n);try{for(u.s();!(h=u.n()).done;){var d=h.value;"OPTGROUP"===d.parentElement.nodeName?this.options.set(this.generateOptionKey(d),{value:d.value,label:d.label,group:d.parentElement.label}):this.options.set(this.generateOptionKey(d),{value:d.value,label:d.label})}}catch(e){u.e(e)}finally{u.f()}}var p,m=e.selectedOptions,f=i(m);try{for(f.s();!(p=f.n()).done;){var v=p.value;"OPTGROUP"===v.parentElement.nodeName?this.selectedOptions.set(this.generateOptionKey(v),{value:v.value,label:v.label,group:v.parentElement.label}):this.selectedOptions.set(this.generateOptionKey(v),{value:v.value,label:v.label}),this.valuesSet.add(v.value)}}catch(e){f.e(e)}finally{f.f()}this.value=Array.from(this.valuesSet.values()).join(","),this.rawValue=this.value}}},{key:"processParameters",value:(m=o(c().mark((function e(){var t,n,s,a,o,d,p,m,f,v,y,b,x,k,M,L,w,O=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=O.length>0&&void 0!==O[0]?O[0]:null)&&(t=this.parameters),h(u(g.prototype),"processParameters",this).call(this,t),void 0!==t.multiple&&(this.multiple=Boolean(t.multiple)),void 0!==t.enableSearch&&(this.enableSearch=Boolean(t.enableSearch)),void 0!==t.placeholder&&("string"!=typeof t.placeholder?console.warn('HaiForm: Parameter "placeholder" must be a string.'):this.placeholder=t.placeholder),void 0!==t.list&&void 0===t.options)if("string"!=typeof t.list)console.warn("HaiForm: List parameter must by a string.");else if(null===(n=document.getElementById(t.list)))console.warn("HaiForm: Datalist with id ".concat(t.list," was not found."));else{s=n.options,a=i(s);try{for(a.s();!(o=a.n()).done;)d=o.value,p={value:d.value,label:d.label},null!==d.getAttribute("data-group")&&(m=d.getAttribute("data-group"),this.optGroups.add(m),p.group=m),this.options.set(this.generateOptionKey(d),p),null!==d.getAttribute("data-selected")&&(!1===this.multiple&&this.selectedOptions.clear(),this.selectedOptions.set(this.generateOptionKey(d),p))}catch(e){a.e(e)}finally{a.f()}}if(void 0===t.optionsSource){e.next=15;break}if("string"==typeof t.optionsSource){e.next=12;break}console.warn('HaiForm: Parameter "optionsSource" must be a string.'),e.next=15;break;case 12:return e.next=14,this.fetchFile(t.optionsSource);case 14:t.options=e.sent;case 15:if(void 0===t.options){e.next=76;break}if(!(t.options instanceof Map)){e.next=47;break}f=i(t.options),e.prev=18,f.s();case 20:if((v=f.n()).done){e.next=37;break}if(y=r(v.value,2),b=y[0],x=y[1],"object"===l(x)){e.next=25;break}return console.warn('HaiForm: Parameter "options" must contain only objects if given as Map. Option skipped.'),e.abrupt("continue",35);case 25:if(void 0!==x.value){e.next=28;break}return console.warn('HaiForm: Each option given by parameter "options" must have a "value" property. Option skipped.'),e.abrupt("continue",35);case 28:if(void 0!==x.label){e.next=31;break}return console.warn('HaiForm: Each option given by parameter "options" must have a "label" property. Option skipped.'),e.abrupt("continue",35);case 31:x.key=b,this.options.set(b,x),!0===x.selected&&(!1===this.multiple&&(this.selectedOptions.clear(),this.valuesSet.clear()),this.selectedOptions.set(b,x),this.valuesSet.add(x.value),this.value=Array.from(this.valuesSet.values()).join(","),this.rawValue=this.value),void 0!==x.group&&this.optGroups.add(x.group);case 35:e.next=20;break;case 37:e.next=42;break;case 39:e.prev=39,e.t0=e.catch(18),f.e(e.t0);case 42:return e.prev=42,f.f(),e.finish(42);case 45:e.next=76;break;case 47:if(!1!==Array.isArray(t.options)){e.next=51;break}console.warn('HaiForm: Parameter "options" must be either a Map or an array of objects.'),e.next=76;break;case 51:k=i(t.options),e.prev=52,k.s();case 54:if((M=k.n()).done){e.next=68;break}if(void 0!==(L=M.value).value){e.next=59;break}return console.warn('HaiForm: Each option given by parameter "options" must have a "value" property. Option skipped.'),e.abrupt("continue",66);case 59:if(void 0!==L.label){e.next=62;break}return console.warn('HaiForm: Each option given by parameter "options" must have a "label" property. Option skipped.'),e.abrupt("continue",66);case 62:w=this.generateOptionKey(L),this.options.set(w,L),!0===L.selected&&(!1===this.multiple&&(this.selectedOptions.clear(),this.valuesSet.clear()),this.selectedOptions.set(w,L),this.valuesSet.add(L.value),this.value=Array.from(this.valuesSet.values()).join(","),this.rawValue=this.value),void 0!==L.group&&this.optGroups.add(L.group);case 66:e.next=54;break;case 68:e.next=73;break;case 70:e.prev=70,e.t1=e.catch(52),k.e(e.t1);case 73:return e.prev=73,k.f(),e.finish(73);case 76:case"end":return e.stop()}}),e,this,[[18,39,42,45],[52,70,73,76]])}))),function(){return m.apply(this,arguments)})},{key:"showDropdown",value:function(e){var t=this.element.querySelector(".dropdown");if(!t.matches(".active")){t.classList.add("active");var n=window.getComputedStyle(document.documentElement).getPropertyValue("--hai-input-mobile-threshold");window.matchMedia("(max-width: ".concat(n,")")).matches&&this.element.classList.add("dialog-display")}}},{key:"hideDropdown",value:function(e){var t=this.element.querySelector(".dropdown");!1===e.currentTarget.contains(e.relatedTarget)&&(t.classList.remove("active"),this.element.classList.remove("dialog-display"))}},{key:"handleInput",value:function(e){if(this.readonly||this.disabled)return{success:!1};var t;t=e.target.matches(".option")?e.target:e.target.closest(".option");var n=this.options.get(t.getAttribute("data-key"));return this.isSelected(n)?this.unselectOption(n):this.selectOption(n),{success:!0}}},{key:"selectOption",value:function(e){!0===this.multiple?(this.valuesSet.add(e.value),this.selectedOptions.set(this.generateOptionKey(e),e),this.value=Array.from(this.valuesSet.values()).join(","),this.rawValue=this.value,this.setTwinOptions(),this.addTag(e)):(this.inputText.textContent=e.label,this.inputText.setAttribute("data-value",e.value),this.showAllOptionItems(),this.valuesSet.clear(),this.selectedOptions.clear(),this.valuesSet.add(e.value),this.selectedOptions.set(this.generateOptionKey(e),e),this.value=e.value,this.rawValue=this.value,this.setTwinOptions()),this.hideOptionItem(e),null!==this.searchInput&&""!==this.searchInput.value&&(this.searchInput.value="",this.renderOptionsItems(),this.searchInput.focus()),!1===this.multiple&&(this.element.querySelector(".dropdown").classList.remove("active"),this.element.classList.remove("dialog-display"))}},{key:"unselectOption",value:function(e){if(!1===this.multiple)return this.element.querySelector(".dropdown").classList.remove("active"),void this.element.classList.remove("dialog-display");this.selectedOptions.delete(this.generateOptionKey(e)),this.valuesSet.delete(e.value),this.value=Array.from(this.valuesSet.values()).join(","),this.rawValue=this.value,this.setTwinOptions(),this.removeTag(e),this.showOptionItem(e)}},{key:"setTwinOptions",value:function(){this.twin.innerHTML="";var e,t=i(this.selectedOptions.values());try{for(t.s();!(e=t.n()).done;){var n=e.value,s=document.createElement("option");s.value=n.value,s.textContent=n.label,s.selected=!0,this.twin.appendChild(s)}}catch(e){t.e(e)}finally{t.f()}}},{key:"addTag",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===n&&(n=this.tagsContainer);var s=document.createElement("li");s.classList.add("tag"),s.setAttribute("data-key",this.generateOptionKey(e));var i=document.createElement("span");if(i.textContent=e.label,s.appendChild(i),!0===this.showTagRemoveButton){var r=document.createElement("button");r.textContent="×",r.classList.add("remove"),r.addEventListener("click",(function(n){t.readonly||t.disabled||(t.unselectOption(e),s.remove())})),s.appendChild(r)}n.appendChild(s)}},{key:"removeTag",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===t&&(t=this.tagsContainer);var n=t.querySelector(".tag[data-key='".concat(this.generateOptionKey(e),"']"));null!==n&&n.remove(),null!==this.searchInput&&this.searchInput.focus()}},{key:"renderOptionsItems",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===e&&(e=this.options),null===t&&(t=this.optionsItemsContainer),null===n&&(n=this.optGroups),t.innerHTML="";var s=this.element.querySelector(".dropdown .info");if(0===e.size)return s.classList.add("active"),void(s.textContent="No options found");if(s.classList.remove("active"),0===n.size){var a,o=i(e);try{for(o.s();!(a=o.n()).done;){var c=r(a.value,2),l=c[0],h=c[1];this.addOptionItem(h,l,t)}}catch(e){o.e(e)}finally{o.f()}}else{var u,d=new Map(e),p=i(n);try{for(p.s();!(u=p.n()).done;){var m=u.value,f=document.createElement("li");f.classList.add("option-group-header");var v=document.createElement("strong");v.textContent=m,f.appendChild(v),t.appendChild(f);var g,y=0,b=0,x=i(d);try{for(x.s();!(g=x.n()).done;){var k=r(g.value,2),M=k[0],L=k[1];L.group===m&&(this.addOptionItem(L,M,t),d.delete(M),!1===this.isSelected(L)&&y++,b++)}}catch(e){x.e(e)}finally{x.f()}0===b?f.remove():f.setAttribute("data-unselected-options","".concat(y))}}catch(e){p.e(e)}finally{p.f()}if(d.size>0){var w=document.createElement("li");w.classList.add("option-group-header");var O=document.createElement("strong");w.appendChild(O),t.appendChild(w);var S,E=i(d);try{for(E.s();!(S=E.n()).done;){var C=r(S.value,2),I=C[0],A=C[1];this.addOptionItem(A,I,t)}}catch(e){E.e(e)}finally{E.f()}}}}},{key:"addOptionItem",value:function(e,t){var n=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===s&&(s=this.optionsItemsContainer);var i=document.createElement("li");i.classList.add("option"),i.setAttribute("data-key",t),i.setAttribute("data-value",e.value);var r=document.createElement("span");null!==e.label&&(r.textContent=e.label),this.isSelected(e)&&i.classList.add("selected"),i.addEventListener("click",(function(e){n.handleInput(e)})),i.append(r),s.appendChild(i)}},{key:"removeOptionItem",value:function(e){var t=this.optionsItemsContainer.querySelector(".option[data-key='".concat(this.generateOptionKey(e),"']"));null!==t&&t.remove()}},{key:"hideOptionItem",value:function(e){var t=this.optionsItemsContainer.querySelector(".option[data-key='".concat(this.generateOptionKey(e),"']"));null!==t&&(t.classList.add("selected"),void 0!==e.group&&this.updateGroupHeaderUnselectedOpt(t,-1))}},{key:"showAllOptionItems",value:function(){var e,t=this.optionsItemsContainer.querySelectorAll(".option.selected"),n=i(t);try{for(n.s();!(e=n.n()).done;){var s=e.value;s.matches(".selected")&&(s.classList.remove("selected"),0!==this.optGroups.length&&this.updateGroupHeaderUnselectedOpt(s,1))}}catch(e){n.e(e)}finally{n.f()}}},{key:"showOptionItem",value:function(e){var t=this.optionsItemsContainer.querySelector(".option[data-key='".concat(this.generateOptionKey(e),"']"));null!==t&&(t.classList.remove("selected"),void 0!==e.group&&this.updateGroupHeaderUnselectedOpt(t,1))}},{key:"updateGroupHeaderUnselectedOpt",value:function(e,t){for(var n,s=e.previousElementSibling;null!==s;){if(s.matches(".option-group-header")){n=s;break}s=s.previousElementSibling}if(void 0!==n){var i=parseInt(n.getAttribute("data-unselected-options"));i+=t,n.setAttribute("data-unselected-options","".concat(i))}}},{key:"isSelected",value:function(e){return this.selectedOptions.has(this.generateOptionKey(e))}},{key:"generateOptionKey",value:function(e){return void 0!==e.key?e.key:"".concat(e.label," (").concat(e.value,")")}},{key:"fetchFile",value:(p=o(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)}))),function(e){return p.apply(this,arguments)})}]),g}();export{ee as HaiInputSelect};
