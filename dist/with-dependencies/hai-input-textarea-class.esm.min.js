/**
 * Hai Form (https://github.com/safraja/hai-form) - Javascript library for custom inputs and selects with additional functions.
 * Copyright (c) 2021 Jakub Šafránek All Rights Reserved
 * @license MIT Licensed
 */
import{_ as t,a as e,c as n,b as i,f as a,g as s,HaiInput as h,e as o,j as l,d as r,k as m,h as d,i as v}from"./hai-input-class.esm.min.js";import"./en.esm.min.js";var c=function(c){t(p,h);var u,g=e(p);function p(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n(this,p),(t=g.call(this,e,i)).textContent="",t.maxLength=null,t.minLength=null,t.maxHtmlLength=null,t.placeholder=null,t.useDefaultButtonsSetting=!0,t.buttonsSetting={},t.allowedHtmlElements=[],t.editor=null,t.toolbar=null,t.messageContainer=null,t.type="textarea",t}return i(p,[{key:"transformElementToHaiInput",value:(u=d(v().mark((function t(){var e,n,i,a,s,h,o,l,r,m,d,c=this;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.element.name,this.value=this.element.value.replace(new RegExp("&nbsp;","g")," "),this.rawValue=this.element.value,(n=document.createElement("input")).name=e,n.type="text",n.value=this.value,n.hidden=!0,n.classList.add("hidden"),t.next=11,this.processAttributes();case 11:return t.next=13,this.processParameters();case 13:void 0!==e&&(this.element.removeAttribute("name"),n.name=e),this.disabled&&(n.disabled=!0),(i=document.createElement("div")).classList.add("hai-input-element"),i.classList.add("textarea"),(a=document.createElement("div")).classList.add("label-text"),(s=document.createElement("div")).classList.add("alert"),(h=document.createElement("div")).classList.add("textarea-zone-wrapper"),h.tabIndex=-1,(o=document.createElement("div")).classList.add("message"),o.classList.add("active"),this.messageContainer=o,(l=document.createElement("div")).classList.add("toolbar"),h.appendChild(l),this.toolbar=l,this.addToolbarButtons(),(r=document.createElement("div")).classList.add("editor"),(m=document.createElement("div")).classList.add("editor-content"),m.contentEditable="true",null!==this.placeholder&&m.setAttribute("data-placeholder",this.placeholder),""!==this.value&&(m.innerHTML=this.value,this.textContent=m.textContent),m.addEventListener("focusout",(function(t){c.handleFocusOut(t)})),r.appendChild(m),h.appendChild(r),m.addEventListener("input",(function(t){c.handleInput(t)})),m.addEventListener("paste",(function(t){if(t.preventDefault(),!c.readonly&&!c.disabled){var e=(t.clipboardData||window.clipboardData).getData("text/html");e=c.stripTags(e,[]);var n=window.getSelection();if(n.rangeCount){n.deleteFromDocument();var i=n.getRangeAt(0);i.collapse(!1);var a=document.createElement("div");a.innerHTML=e;for(var s,h=document.createDocumentFragment();s=a.firstChild;)h.appendChild(s);i.insertNode(h),c.value=c.editor.innerHTML.replace(new RegExp("&nbsp;","g")," "),c.rawValue=c.editor.innerHTML,c.textContent=c.editor.textContent,c.saveValueToTwin()}}})),i.append(a,h,s,n),this.element.after(i),this.element.remove(),this.twin=n,this.editor=m,this.element=h,this.labelElement=a,this.warningElement=s,void 0!==this.label&&(a.textContent=this.label),this.element.haiInput=this,null!==(d=n.form)&&d.addEventListener("submit",(function(t){var e=c.checkValidity();return!1!==e.success||(t.preventDefault(),c.updateValidity(e,c.element),!1)}));case 58:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"checkValidity",value:function(){var t=a(s(p.prototype),"checkValidity",this).call(this);return!1===t.success?t:null!==this.maxLength&&this.textContent.length>this.maxLength?{success:!1,message:h.dictionary["max-length-exceeded"].replace("{{maxLength}}",this.maxLength)}:null!==this.maxHtmlLength&&this.value.length>this.maxHtmlLength?{success:!1,message:h.dictionary["max-formatted-length"].replace("{{maxHtmlLength}}",this.maxHtmlLength)}:null!==this.minLength&&this.textContent.length<this.minLength?{success:!1,message:h.dictionary["min-length-exceeded"].replace("{{minLength}}",this.minLength)}:{success:!0}}},{key:"formatText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";document.execCommand(t,!1,e),this.editor.focus()}},{key:"handleFocusOut",value:function(t){"<br>"!==this.editor.innerHTML.trim()&&"<br>"!==this.value.trim()||(this.editor.innerHTML="",this.value="",this.rawValue="",this.textContent="");var e=this.checkValidity();this.updateValidity(e,t.target)}},{key:"addToolbarButtons",value:function(){for(var t=this.getButtonsSetting(),e=0,n=Object.entries(t);e<n.length;e++){var i=o(n[e],2);i[0];var a=i[1];a.use&&this.addToolbarButton(a)}}},{key:"addToolbarButton",value:function(t){var e=this;if("string"==typeof t.formatCommand){if("function"==typeof document.queryCommandSupported&&!1===document.queryCommandSupported(t.formatCommand))return void console.warn('HaiForm: Command "'.concat(t.formatCommand,'" is not supported, button not added.'));if("function"!=typeof document.execCommand)return void console.warn("HaiForm: execCommand function is not supported, button not added..")}var n=document.createElement("button");n.innerHTML=t.icon,n.title=t.title,n.type="button",n.addEventListener("click",(function(n){e.formatText(t.formatCommand),e.handleInput(n)})),this.toolbar.appendChild(n)}},{key:"processParameters",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===t&&(t=this.parameters),a(s(p.prototype),"processParameters",this).call(this,t),void 0!==t.placeholder&&("string"!=typeof t.placeholder?console.warn('HaiForm: Parameter "placeholder" must be a string.'):this.placeholder=t.placeholder),void 0!==t.maxLength&&(!0===isNaN(t.maxLength)?console.warn('HaiForm: Parameter "maxLength" must be a number, reverting back to null.'):this.maxLength=t.maxLength),void 0!==t.maxHtmlLength&&(!0===isNaN(t.maxHtmlLength)?console.warn('HaiForm: Parameter "maxHtmlLength" must be a number, reverting back to null.'):this.maxHtmlLength=t.maxHtmlLength),void 0!==t.minLength&&(!0===isNaN(t.minLength)?console.warn('HaiForm: Parameter "minLength" must be a number, reverting back to null.'):this.minLength=t.minLength),void 0!==t.placeholder&&("string"!=typeof t.placeholder?console.warn('HaiForm: Parameter "placeholder" must be a string.'):this.placeholder=t.placeholder),void 0!==t.useDefaultButtonsSetting&&(this.useDefaultButtonsSetting=Boolean(t.useDefaultButtonsSetting)),void 0!==t.buttonsSetting&&("object"!==l(t.buttonsSetting)?console.warn('HaiForm: Parameter "buttonsSetting" must by an object.'):this.buttonsSetting=t.buttonsSetting),void 0!==t.allowedHtmlElements)if(!1===Array.isArray(t.allowedHtmlElements))console.warn('HaiForm: Parameter "allowedHtmlElements" must be an array of strings.');else{var e,n=r(t.allowedHtmlElements);try{for(n.s();!(e=n.n()).done;){var i=e.value;"string"==typeof i?this.allowedHtmlElements.push(i):console.warn('HaiForm: Items of  parameter "allowedHtmlElements" must be a string, '.concat(l(i)," given, skipping."))}}catch(t){n.e(t)}finally{n.f()}}}},{key:"handleInput",value:function(t){return this.readonly||this.disabled?(this.editor.innerHTML=this.value.replace(new RegExp(" ","g"),"&nbsp;"),{success:!1}):(this.value=this.editor.innerHTML.replace(new RegExp("&nbsp;","g")," "),this.rawValue=this.editor.innerHTML,this.textContent=this.editor.textContent,this.saveValueToTwin(),{success:!0})}},{key:"getButtonsSetting",value:function(){var t={undo:{use:!0,title:"Undo",formatCommand:"undo",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M18.885 3.515c-4.617-4.618-12.056-4.676-16.756-.195l-2.129-2.258v7.938h7.484l-2.066-2.191c2.82-2.706 7.297-2.676 10.073.1 4.341 4.341 1.737 12.291-5.491 12.291v4.8c3.708 0 6.614-1.244 8.885-3.515 4.686-4.686 4.686-12.284 0-16.97z"/></svg>'},redo:{use:!0,title:"Redo",formatCommand:"redo",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M5.115 3.515c4.617-4.618 12.056-4.676 16.756-.195l2.129-2.258v7.938h-7.484l2.066-2.191c-2.82-2.706-7.297-2.676-10.073.1-4.341 4.341-1.737 12.291 5.491 12.291v4.8c-3.708 0-6.614-1.244-8.885-3.515-4.686-4.686-4.686-12.284 0-16.97z"/></svg>'},bold:{use:!0,title:"Bold",formatCommand:"bold",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M18.287 11.121c1.588-1.121 2.713-3.018 2.713-5.093 0-2.946-1.918-5.951-7.093-6.028h-11.907v2.042c1.996 0 3 .751 3 2.683v14.667c0 1.689-.558 2.608-3 2.608v2h11.123c6.334 0 8.877-3.599 8.877-7.038 0-2.538-1.417-4.67-3.713-5.841zm-8.287-8.121h2.094c2.357 0 4.126 1.063 4.126 3.375 0 2.035-1.452 3.625-3.513 3.625h-2.707v-7zm2.701 18h-2.701v-8h2.781c2.26.024 3.927 1.636 3.927 3.667 0 2.008-1.226 4.333-4.007 4.333z"/></svg>'},italic:{use:!0,title:"Italic",formatCommand:"italic",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M9.565 20.827c-.361.732-.068 1.173.655 1.173h1.78v2h-9v-2h.897c1.356 0 1.673-.916 2.157-1.773l8.349-16.89c.403-.852-.149-1.337-.855-1.337h-1.548v-2h9v2h-.84c-1.169 0-1.596.646-2.06 1.516l-8.535 17.311z"/></svg>'},underline:{use:!0,title:"Underline",formatCommand:"underline",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M20 24h-16v-2h16v2zm-5-24v1.973c1.619 0 2 .926 2 1.497v9.056c0 2.822-2.161 4.507-5 4.507s-5-1.685-5-4.507v-9.056c0-.571.381-1.497 2-1.497v-1.973h-7v1.973c1.66 0 2 .575 2 1.497v8.828c0 5.175 3.096 7.702 8 7.702 4.899 0 8-2.527 8-7.702v-8.828c0-.922.34-1.497 2-1.497v-1.973h-7z"/></svg>'},strikeThrough:{use:!0,title:"Strike",formatCommand:"strikethrough",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M19.271 14.521c.358.74.728 1.803.728 2.818 0 4.658-4 6.661-8.498 6.661-2.183 0-4.483-.472-6.5-1.341v-4.659h2c.227 1.809 1.875 3 4.444 3 2.503 0 4.415-1.046 4.63-3.28.127-1.321-.65-2.451-1.653-3.199h4.849zm-4.583-3.521c-3.124-1.398-6.281-2.75-5.639-5.669.714-3.244 7.265-3.206 7.951.669h1.979v-5.109c-2.028-.604-3.936-.891-5.649-.891-4.927 0-8.252 2.375-8.252 6.454 0 1.899.862 3.554 2.113 4.546h-7.191v2h24v-2h-9.312z"/></svg>'},justifyLeft:{use:!0,title:"Left align",formatCommand:"justifyleft",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M24 3h-24v-2h24v2zm-12 3h-12v2h12v-2zm12 5h-24v2h24v-2zm-12 5h-12v2h12v-2zm12 5h-24v2h24v-2z"/></svg>'},justifyCenter:{use:!0,title:"Center align",formatCommand:"justifycenter",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M24 3h-24v-2h24v2zm-6 3h-12v2h12v-2zm6 5h-24v2h24v-2zm-6 5h-12v2h12v-2zm6 5h-24v2h24v-2z"/></svg>'},justifyRight:{use:!0,title:"Right align",formatCommand:"justifyright",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M0 1h24v2h-24v-2zm12 7h12v-2h-12v2zm-12 5h24v-2h-24v2zm12 5h12v-2h-12v2zm-12 5h24v-2h-24v2z"/></svg>'},justifyFull:{use:!0,title:"Justify",formatCommand:"justifyfull",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M0 1h24v2h-24v-2zm0 7h24v-2h-24v2zm0 5h24v-2h-24v2zm0 5h24v-2h-24v2zm0 5h24v-2h-24v2z"/></svg>'},orderedList:{use:!0,title:"Ordered list",formatCommand:"insertorderedlist",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7 1h17v2h-17v-2zm0 7h17v-2h-17v2zm0 5h17v-2h-17v2zm0 5h17v-2h-17v2zm0 5h17v-2h-17v2zm-5.511-16h1.353v-6h-1.14c0 .91-.809 1.07-1.702 1.111v1h1.489v3.889zm2.433 6.667h-1.827c.823-.74 1.722-1.627 1.722-2.782 0-1.145-.762-1.885-1.941-1.885-.642 0-1.288.204-1.833.656l.423 1.148c.352-.279.715-.524 1.167-.524.486 0 .754.255.754.717-.008.774-.858 1.527-2.387 3.018v.958h3.922v-1.306zm-.87 6.124c.499-.266.771-.715.771-1.288 0-.748-.568-1.503-1.836-1.503-.571 0-1.241.142-1.74.482l.307 1.161c.432-.284.831-.394 1.15-.394.428 0 .674.174.674.478 0 .425-.52.538-.827.538h-.577v1.154h.601c.438 0 .949.183.949.701 0 .39-.329.633-.86.633-.451 0-.887-.163-1.282-.397l-.304 1.2c.5.322 1.11.444 1.675.444 1.344 0 2.247-.728 2.247-1.812 0-.646-.371-1.178-.948-1.397z"/></svg>'},unorderedList:{use:!0,title:"Dotted list",formatCommand:"insertunorderedlist",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7 1h17v2h-17v-2zm0 7h17v-2h-17v2zm0 5h17v-2h-17v2zm0 5h17v-2h-17v2zm0 5h17v-2h-17v2zm-5-22c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2zm0 9c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2zm0 9c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2z"/></svg>'},subscript:{use:!0,title:"Subscript",formatCommand:"subscript",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M24 22.469h-2.311c1.041-.867 2.178-1.907 2.178-3.26 0-1.342-.963-2.209-2.453-2.209-.813 0-1.631.238-2.318.769l.535 1.345c.445-.327.905-.614 1.477-.614.615 0 .954.299.954.84-.012.907-1.129 1.79-3.062 3.536v1.124h5v-1.531zm-7-6.469v2h-4.778l-3.751-5.938-3.521 5.938h-4.95v-2h1.08c.654 0 1.259-.358 1.594-.914l3.634-6.091-3.73-6.144c-.341-.531-.932-.853-1.568-.853h-1.01v-1.998h4.611l3.86 5.964 4.09-5.964h4.439v1.998h-.838c-.637 0-1.228.322-1.568.853l-3.96 6.144 3.864 6.091c.334.556.94.914 1.594.914h.908z"/></svg>'},superscript:{use:!0,title:"Superscript",formatCommand:"superscript",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M24 5.469h-2.31c1.041-.867 2.178-1.907 2.178-3.26 0-1.342-.964-2.209-2.454-2.209-.813 0-1.63.238-2.317.769l.535 1.345c.444-.327.904-.614 1.475-.614.616 0 .955.299.955.84-.012.907-1.129 1.79-3.062 3.536v1.124h5v-1.531zm-7 16.531v2h-4.778l-3.751-5.938-3.521 5.938h-4.95v-2h1.08c.654 0 1.259-.358 1.594-.914l3.634-6.091-3.73-6.144c-.341-.531-.932-.853-1.568-.853h-1.01v-1.998h4.611l3.86 5.964 4.09-5.964h4.439v1.998h-.838c-.636 0-1.227.322-1.567.853l-3.96 6.144 3.864 6.091c.334.556.939.914 1.593.914h.908z"/></svg>'}};return!1===this.useDefaultButtonsSetting&&(t={}),m(m({},t),this.buttonsSetting)}},{key:"stripTags",value:function(t,e){var n=/<\/?([a-z0-9]*)\b[^>]*>?/gi,i=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,a=t;for(a="<"===a.substring(a.length-1)?a.substring(0,a.length-1):a;;){var s=a;if(a=s.replace(i,"").replace(n,(function(t,n){return e.indexOf(n.toLowerCase())>-1?t:""})),s===a)return a}}}]),p}();export{c as HaiInputTextarea};
